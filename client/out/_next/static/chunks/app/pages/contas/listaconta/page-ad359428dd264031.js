(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6275],{46486:function(e,t,a){Promise.resolve().then(a.bind(a,78891))},78891:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var s=a(57437),n=a(56189),r=a(26249),o=a(89470),i=a(93641),l=a(70456),c=a(98925),d=a(28198),u=a(44510),h=a(72354),x=a(77148),p=a(29629),m=a(9139),j=a(964),f=a(93908),g=a(71272),b=a(2265),C=a(62187),v=a(87138),k=a(80665),w=a(43781),y=a(59867),N=[{name:"Estabelecimento",uid:"estabelecimento",sortable:!0},{name:"Vencimento ",uid:"dataVencimento",sortable:!0},{name:"Valor",uid:"valor",sortable:!0},{name:"Respons\xe1vel",uid:"pagador:",sortable:!0},{name:"Pago ?",uid:"pago",sortable:!0},{name:"A\xe7\xf5es",uid:"actions",sortable:!1}],L=a(9782),M=a(40349),Z=a(79602),S=a(32460),W=a(84465),D=a(11183),z=a(26583),P=a(81313),V=a(5048),T=a(33109),A=a(80590),B=a(98743),E=a(38602),R=a(16356),U=a(30276);function F(){var e;let t=new Date,a=t.getMonth()+1,F=t.getFullYear(),O="".concat(F,"-").concat(a<10?"0".concat(a):a),[_,H]=(0,b.useState)(O),[Y,G]=(0,b.useState)(),[I,q]=(0,b.useState)(),[J,X]=(0,b.useState)(!1),[K,Q]=(0,b.useState)(!1),{visibility:$}=(0,D.Z)(),[ee,et]=(0,b.useState)(),[ea,es]=(0,b.useState)(0),[en,er]=(0,b.useState)([]),[eo,ei]=(0,b.useState)([]),[el,ec]=(0,b.useState)(""),[ed,eu]=(0,b.useState)(5),[eh,ex]=(0,b.useState)(1),[ep,em]=(0,b.useState)({column:"dataGasto",direction:"ascending"}),[ej,ef]=(0,b.useState)({show:!1,objeto:{}}),{tokenUsuario:eg}=(0,P.Z)(),eb=async()=>{ei((await k.h.get("/buscacontamesatual",{params:{id:null==eg?void 0:eg.id}})).data)},eC=async()=>{er((await k.h.get("/buscaconta",{params:{id:null==eg?void 0:eg.id}})).data)};(0,b.useEffect)(()=>{eb(),eC()},[]),(0,b.useEffect)(()=>{(async()=>{try{let e=await (0,U.Z)(_,null==eg?void 0:eg.id);G(e)}catch(e){console.error("Erro ao buscar o or\xe7amento mensal:",e)}})()},[_,en,O]);let ev=async e=>{H(e),ei((await k.h.post("/buscacontadata",{data:e,id:null==eg?void 0:eg.id})).data)},ek=async(e,t)=>{let a=await k.h.put("/pagaconta",{id:e});ev(t),200===a.status&&ev(t)},ew=en?en.reduce((e,t)=>{let{mesCorrespondente:a,...s}=t;return e[a]?e[a].itens.push(s):e[a]={data:a,itens:[s]},e},{}):{},ey=en?Object.keys(ew).map(e=>ew[e]):[];ey&&ey.sort((e,t)=>new Date(e.data).getTime()-new Date(t.data).getTime());let eN=ey.reduce((e,t)=>{let a=t.data.split("-")[0];return e[a]||(e[a]=[]),e[a].push(t),e},{}),eL=eo&&eo.reduce((e,t)=>e+t.valor,0),eM=e=>{et(e),Q(!0)},eZ=!!el,eS=(0,b.useMemo)(()=>{let e=[...eo];return eZ&&(e=e.filter(e=>e.estabelecimento.toLowerCase().includes(el.toLowerCase()))),e},[eo,el,eZ]),eW=Math.ceil(eS.length/ed),eD=(0,b.useMemo)(()=>{let e=(eh-1)*ed;return eS.slice(e,e+ed)},[eh,eS,ed]),ez=(0,b.useMemo)(()=>[...eD].sort((e,t)=>{let a=e[ep.column],s=t[ep.column],n=a<s?-1:a>s?1:0;return"descending"===ep.direction?-n:n}),[ep,eD]),eP=(0,b.useCallback)((e,t)=>{let a=e[t];switch(t){case"estabelecimento":return(0,s.jsx)("p",{children:e.estabelecimento});case"dataVencimento":return(0,s.jsx)("p",{children:e.dataVencimento&&(0,A.Z)(e.dataVencimento)});case"mesCorrespondente":return(0,s.jsx)("p",{children:(0,T.Z)(e.mesCorrespondente)});case"valor":return(0,s.jsx)("p",{children:$?(0,C.Z)(e.valor):"****"});case"pagador:":return(0,s.jsx)("p",{children:e.pagador});case"pago":return(0,s.jsx)("p",{children:0===e.pago?(0,s.jsx)(n.z,{startContent:(0,s.jsx)(R.LWo,{size:18,width:18,height:18}),variant:"faded",color:"danger",children:"N\xe3o pago"}):(0,s.jsx)(n.z,{startContent:(0,s.jsx)(E.n,{size:18,width:18,height:18}),variant:"faded",color:"success",children:"Pago"})});case"actions":return(0,s.jsxs)("div",{className:"relative flex items-center gap-12 ",children:[(0,s.jsx)(r.e,{color:"secondary",content:"Detalhes",children:(0,s.jsx)("span",{onClick:()=>eM(e),className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,s.jsx)(S.t,{})})}),(0,s.jsx)(r.e,{className:"bg-buttonAzulClaro text-white",content:"Fazer o Pagamento?",children:(0,s.jsx)("span",{onClick:()=>ek(e.id,e.mesCorrespondente),className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,s.jsx)(R.IDG,{className:"text-buttonAzulClaro"})})}),(0,s.jsx)(r.e,{className:"",color:"danger",content:"Deletar",children:(0,s.jsx)("span",{onClick:()=>ef({show:!0,objeto:e}),className:"text-lg text-danger cursor-pointer active:opacity-50",children:(0,s.jsx)(W.p,{className:"text-red-500"})})})]});default:return a}},[$,eo]),eV=(0,b.useCallback)(()=>{eh<eW&&ex(eh+1)},[eh,eW]),eT=(0,b.useCallback)(()=>{eh>1&&ex(eh-1)},[eh]),eA=(0,b.useCallback)(e=>{eu(Number(e.target.value)),ex(1)},[]),eB=(0,b.useCallback)(e=>{e?(ec(e),ex(1)):ec("")},[]),eE=(0,b.useCallback)(()=>{ec(""),ex(1)},[]),eR=null!==(e=null==Y?void 0:Y.porcentagem)&&void 0!==e?e:0,eU=(0,b.useMemo)(()=>(0,s.jsxs)("div",{className:"flex flex-col gap-4  pb-4 p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-end py-4 w-full",children:[(0,s.jsx)(o.Y,{size:"md",fullWidth:!0,className:"w-full sm:max-w-[44%]  ",placeholder:"Pesquisar Contas...",startContent:(0,s.jsx)(Z.W,{}),value:el,onClear:()=>eE(),onValueChange:eB}),(0,s.jsx)("div",{className:"flex gap-3 w-full justify-end",children:(0,s.jsx)(v.default,{href:"/pages/contas/novaconta",children:(0,s.jsx)(i.A,{color:"primary",variant:"solid",endContent:(0,s.jsx)(z.p,{size:18,width:18,height:18}),children:"Nova Conta"})})})]}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)(l.W,{size:"sm",radius:"sm",classNames:{base:"max-w-md",track:"drop-shadow-md border border-default",indicator:"bg-gradient-to-r from-pink-500 to-yellow-500"},label:"Controle de or\xe7amento",value:parseInt(eR),showValueLabel:!0}),(0,s.jsx)(r.e,{color:"warning",content:"Soma entre despesas e contas",placement:"right-end",children:(0,s.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,s.jsx)(w.Hfo,{})})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("span",{className:"text-default-400 text-small font-extrabold",children:["Total ",eo.length," Despesas cadastradas"]}),(0,s.jsxs)("span",{className:"text-default-400 text-small font-extrabold",children:["Total de ",(0,s.jsx)("span",{className:"text-red-500",children:(0,C.Z)(eL)})," Despesas no m\xeas selecionado"]})]}),(0,s.jsxs)("label",{className:"flex items-center text-default-400 text-small",children:["Linhas por p\xe1ginas",(0,s.jsxs)("select",{className:"bg-transparent outline-none text-default-400 text-small",onChange:eA,children:[(0,s.jsx)("option",{value:"5",children:"5"}),(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"15",children:"15"})]})]})]})]}),[el,eA,eo.length,eB,eZ,en,_,Y]),eF=(0,b.useMemo)(()=>(0,s.jsxs)("div",{className:"py-2 px-2 flex justify-between items-center",children:[(0,s.jsx)(c.g,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:eh,total:eW,onChange:ex}),(0,s.jsxs)("div",{className:"hidden sm:flex w-[30%] justify-end gap-2",children:[(0,s.jsx)(i.A,{isDisabled:1===eW,size:"sm",variant:"flat",onPress:eT,children:"Anterior"}),(0,s.jsx)(i.A,{isDisabled:1===eW,size:"sm",variant:"flat",onPress:eV,children:"Pr\xf3xima"}),(0,s.jsx)(B.Z,{tamanho:!1,size:"sm"})]})]}),[eh,eW,eZ]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-[95%] m-auto",children:[(0,s.jsx)(V.Z,{title:"Minhas Contas"}),(0,s.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-12 pt-6",children:[(0,s.jsx)("div",{className:"col-span-2 justify-center",children:(0,s.jsx)(d.d,{motionProps:{variants:{enter:{y:0,opacity:1,height:"auto",transition:{height:{type:"spring",stiffness:500,damping:30,duration:1},opacity:{easings:"ease",duration:1}}},exit:{y:-10,opacity:0,height:0,transition:{height:{easings:"ease",duration:.25},opacity:{easings:"ease",duration:.3}}}}},children:Object.keys(eN).map(e=>(0,s.jsx)(u.G,{classNames:{title:"text-primaryTableText font-bold text-center border-b-orange-100 bg-BgCardPadrao"},"aria-label":"Acorde\xe3o ".concat(e),title:e,children:(0,s.jsx)("div",{children:eN[e].map((e,t)=>(0,s.jsx)("div",{className:"text-center border-b-orange-100 cursor-pointer ".concat(t===ea?"bg-primaryTableText":""),onClick:()=>{ev(e.data),es(t)},children:(()=>{let[t,a]=e.data.split("-").map(Number),s=new Date(t,a-1);return(0,L.WU)(s,"MMMM yyyy",{locale:M.F}).toUpperCase()})()},e.data))})},e))})}),(0,s.jsx)("div",{className:"col-span-10 px-6  rounded-lg",children:(0,s.jsxs)(h.w,{className:"bg-BgCardPadrao",children:[eU,(0,s.jsxs)(x.b,{"aria-label":"Example table with custom cells",selectionMode:"none",classNames:{wrapper:"max-h-[382px]  bg-BgCardPadrao"},sortDescriptor:ep,onSortChange:em,children:[(0,s.jsx)(p.J,{columns:N,children:e=>(0,s.jsx)(m.j,{className:"text-primaryTableText font-bold ",allowsSorting:e.sortable,align:"actions"===e.uid||"pago"===e.uid?"center":"start",children:e.name},e.uid)}),(0,s.jsx)(j.y,{emptyContent:"Sem Contas",items:ez,children:e=>(0,s.jsx)(f.g,{className:" ".concat(1===e.pago?"text-default-500 ":"hover:text-primaryTableText"),children:t=>(0,s.jsx)(g.X,{children:eP(e,t)})},e.id)})]},String($)),eF]})})]})]}),(0,s.jsx)(y.Z,{open:K,onClose:()=>Q(!1),observacao:ee})]})}},98743:function(e,t,a){"use strict";var s=a(57437),n=a(93641),r=a(16463);t.Z=e=>{let{className:t,tamanho:a,size:o}=e,i=(0,r.useRouter)();return(0,s.jsx)(n.A,{fullWidth:!!a&&a,size:o,onClick:()=>{i.back()},className:"bg-[#f97316] ",children:"Voltar"})}},62187:function(e,t){"use strict";t.Z=e=>e?e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"RS 0.00"},59867:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var s=a(57437);a(2265);var n=a(84603),r=a(2429),o=a(95256),i=a(81887),l=a(89470),c=a(70186),d=a(47971),u=a(93641);function h(e){let{open:t,onClose:a,observacao:h}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n.R,{backdrop:"opaque",isOpen:t,onClose:a,placement:"center",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},className:"bg-black rounded-lg p-4 text-white",children:(0,s.jsx)(r.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{className:"text-center",children:"Observa\xe7\xe3o"}),(0,s.jsxs)(i.I,{className:"text-white bg-black",children:[(0,s.jsx)(l.Y,{label:"Comprador",defaultValue:h.responsavel,fullWidth:!0}),(0,s.jsx)(l.Y,{label:"Pagador",defaultValue:h.pagante,fullWidth:!0}),(0,s.jsx)(c.Y,{label:"Observa\xe7\xe3o",defaultValue:h.observacao,fullWidth:!0})]}),(0,s.jsx)(d.R,{children:(0,s.jsx)(u.A,{color:"danger",variant:"light",onPress:e,children:"Fechar"})})]})})})})}},80590:function(e,t,a){"use strict";function s(e){let[t,a,s]=e.split("/");return"".concat(s,"/").concat(a,"/").concat(t)}a.d(t,{Z:function(){return s}}),a(2265)},33109:function(e,t,a){"use strict";function s(e){let[t,a]=e.split("-");return"".concat(a,"/").concat(t)}a.d(t,{Z:function(){return s}}),a(2265)},30276:function(e,t,a){"use strict";var s=a(80665);async function n(e,t){console.log("\uD83D\uDE80 ~ ControleMensal ~ data",e);let a=await s.h.post("/controleorcamento",{data:e,id:t});return console.log("\uD83D\uDE80 ~ ControleMensal ~ response",a),a.data}t.Z=n},81313:function(e,t,a){"use strict";let s=(0,a(39099).Ue)(e=>({tokenUsuario:null,setTokenUsuario:t=>e({tokenUsuario:t})}));t.Z=s},11183:function(e,t,a){"use strict";let s=(0,a(39099).Ue)(e=>({visibility:!1,toggleVisibility:()=>e(e=>({visibility:!e.visibility}))}));t.Z=s},38602:function(e,t,a){"use strict";a.d(t,{n:function(){return n}});var s=a(57437);a(2265);let n=e=>{let{size:t,height:a,width:n,...r}=e;return(0,s.jsx)("svg",{width:t||n||24,height:t||a||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,s.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z",fill:"currentColor"})})}},84465:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var s=a(57437);a(2265);let n=e=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 20 20",width:"1em",...e,children:[(0,s.jsx)("path",{d:"M17.5 4.98332C14.725 4.70832 11.9333 4.56665 9.15 4.56665C7.5 4.56665 5.85 4.64998 4.2 4.81665L2.5 4.98332",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,s.jsx)("path",{d:"M7.08331 4.14169L7.26665 3.05002C7.39998 2.25835 7.49998 1.66669 8.90831 1.66669H11.0916C12.5 1.66669 12.6083 2.29169 12.7333 3.05835L12.9166 4.14169",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,s.jsx)("path",{d:"M15.7084 7.61664L15.1667 16.0083C15.075 17.3166 15 18.3333 12.675 18.3333H7.32502C5.00002 18.3333 4.92502 17.3166 4.83335 16.0083L4.29169 7.61664",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,s.jsx)("path",{d:"M8.60834 13.75H11.3833",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,s.jsx)("path",{d:"M7.91669 10.4167H12.0834",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})]})},32460:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var s=a(57437);a(2265);let n=e=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 20 20",width:"1em",...e,children:[(0,s.jsx)("path",{d:"M12.9833 10C12.9833 11.65 11.65 12.9833 10 12.9833C8.35 12.9833 7.01666 11.65 7.01666 10C7.01666 8.35 8.35 7.01666 10 7.01666C11.65 7.01666 12.9833 8.35 12.9833 10Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,s.jsx)("path",{d:"M9.99999 16.8916C12.9417 16.8916 15.6833 15.1583 17.5917 12.1583C18.3417 10.9833 18.3417 9.00831 17.5917 7.83331C15.6833 4.83331 12.9417 3.09998 9.99999 3.09998C7.05833 3.09998 4.31666 4.83331 2.40833 7.83331C1.65833 9.00831 1.65833 10.9833 2.40833 12.1583C4.31666 15.1583 7.05833 16.8916 9.99999 16.8916Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})]})},26583:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var s=a(57437);a(2265);let n=e=>{let{size:t=24,width:a,height:n,...r}=e;return(0,s.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:t||n,role:"presentation",viewBox:"0 0 24 24",width:t||a,...r,children:(0,s.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[(0,s.jsx)("path",{d:"M6 12h12"}),(0,s.jsx)("path",{d:"M12 18V6"})]})})}},79602:function(e,t,a){"use strict";a.d(t,{W:function(){return n}});var s=a(57437);a(2265);let n=e=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,s.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})},5048:function(e,t,a){"use strict";var s=a(57437);a(2265),t.Z=e=>{let{title:t}=e;return(0,s.jsx)("h1",{className:"text-2xl font-bold text-center py-4 text-buttonAzulClaro",children:t})}},80665:function(e,t,a){"use strict";a.d(t,{h:function(){return s}});let s=a(38472).Z.create({baseURL:"https://app.fluxodocapital.com.br/api"})}},function(e){e.O(0,[6051,1779,4175,6310,7570,3641,5604,5988,4351,8230,3516,6501,1298,1734,6773,6249,7138,5077,9556,3112,2971,7023,1744],function(){return e(e.s=46486)}),_N_E=e.O()}]);