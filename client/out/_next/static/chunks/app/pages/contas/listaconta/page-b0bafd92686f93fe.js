(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6275],{46486:function(e,t,s){Promise.resolve().then(s.bind(s,78891))},78891:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(57437),n=s(56189),r=s(26249),o=s(89470),l=s(93641),i=s(70456),c=s(98925),d=s(28198),u=s(44510),h=s(72354),x=s(77148),p=s(29629),m=s(9139),j=s(964),g=s(93908),f=s(71272),b=s(2265),C=s(62187),v=s(87138),k=s(80665),w=s(43781),y=s(59867),N=[{name:"Estabelecimento",uid:"estabelecimento",sortable:!0},{name:"Vencimento ",uid:"dataVencimento",sortable:!0},{name:"Valor",uid:"valor",sortable:!0},{name:"Respons\xe1vel",uid:"pagador:",sortable:!0},{name:"Pago ?",uid:"pago",sortable:!0},{name:"A\xe7\xf5es",uid:"actions",sortable:!1}],L=s(9782),Z=s(40349),M=s(79602),S=s(32460),D=s(84465),W=s(11183),z=s(26583),P=s(81313),T=s(5048),A=s(33109),V=s(80590),E=s(98743),B=s(38602),R=s(16356),F=s(30276),O=s(95404);function U(){var e;let t=new Date,s=t.getMonth()+1,U=t.getFullYear(),_="".concat(U,"-").concat(s<10?"0".concat(s):s),[H,I]=(0,b.useState)(""),[Y,q]=(0,b.useState)(),[G,J]=(0,b.useState)(_),[X,K]=(0,b.useState)(),[Q,$]=(0,b.useState)(),[ee,et]=(0,b.useState)(!1),[es,ea]=(0,b.useState)(!1),{visibility:en}=(0,W.Z)(),[er,eo]=(0,b.useState)(),[el,ei]=(0,b.useState)(0),[ec,ed]=(0,b.useState)([]),[eu,eh]=(0,b.useState)([]),[ex,ep]=(0,b.useState)(""),[em,ej]=(0,b.useState)(5),[eg,ef]=(0,b.useState)(1),[eb,eC]=(0,b.useState)({column:"dataGasto",direction:"ascending"}),[ev,ek]=(0,b.useState)({show:!1,objeto:null});console.log("\uD83D\uDE80 ~ ListaConta ~ modalInfo",ev);let{tokenUsuario:ew}=(0,P.Z)(),ey=async()=>{eh((await k.h.get("/buscacontamesatual",{params:{id:null==ew?void 0:ew.id}})).data)},eN=async()=>{ed((await k.h.get("/buscaconta",{params:{id:null==ew?void 0:ew.id}})).data)};(0,b.useEffect)(()=>{ey(),eN()},[]),(0,b.useEffect)(()=>{(async()=>{try{let e=await (0,F.Z)(G,null==ew?void 0:ew.id);K(e)}catch(e){console.error("Erro ao buscar o or\xe7amento mensal:",e)}})()},[G,ec,_]);let eL=async()=>{try{let e=await k.h.delete("/deletaconta",{params:{id:ev.objeto}});200===e.status&&(I(e.data.message),q("success"),eN(),ey()),setTimeout(()=>{I(""),ek({show:!1,objeto:null})},2e3)}catch(e){I(e.response.data.message),q("error"),setTimeout(()=>{I(""),ek({show:!1,objeto:null})},2e3)}},eZ=async e=>{J(e),eh((await k.h.post("/buscacontadata",{data:e,id:null==ew?void 0:ew.id})).data)},eM=async(e,t)=>{let s=await k.h.put("/pagaconta",{id:e});eZ(t),200===s.status&&eZ(t)},eS=ec?ec.reduce((e,t)=>{let{mesCorrespondente:s,...a}=t;return e[s]?e[s].itens.push(a):e[s]={data:s,itens:[a]},e},{}):{},eD=ec?Object.keys(eS).map(e=>eS[e]):[];eD&&eD.sort((e,t)=>new Date(e.data).getTime()-new Date(t.data).getTime());let eW=eD.reduce((e,t)=>{let s=t.data.split("-")[0];return e[s]||(e[s]=[]),e[s].push(t),e},{}),ez=eu&&eu.reduce((e,t)=>e+t.valor,0),eP=e=>{eo(e),ea(!0)},eT=!!ex,eA=(0,b.useMemo)(()=>{let e=[...eu];return eT&&(e=e.filter(e=>e.estabelecimento.toLowerCase().includes(ex.toLowerCase()))),e},[eu,ex,eT]),eV=Math.ceil(eA.length/em),eE=(0,b.useMemo)(()=>{let e=(eg-1)*em;return eA.slice(e,e+em)},[eg,eA,em]),eB=(0,b.useMemo)(()=>[...eE].sort((e,t)=>{let s=e[eb.column],a=t[eb.column],n=s<a?-1:s>a?1:0;return"descending"===eb.direction?-n:n}),[eb,eE]),eR=(0,b.useCallback)((e,t)=>{let s=e[t];switch(t){case"estabelecimento":return(0,a.jsx)("p",{children:e.estabelecimento});case"dataVencimento":return(0,a.jsx)("p",{children:e.dataVencimento&&(0,V.Z)(e.dataVencimento)});case"mesCorrespondente":return(0,a.jsx)("p",{children:(0,A.Z)(e.mesCorrespondente)});case"valor":return(0,a.jsx)("p",{children:en?(0,C.Z)(e.valor):"****"});case"pagador:":return(0,a.jsx)("p",{children:e.pagador});case"pago":return(0,a.jsx)("p",{children:0===e.pago?(0,a.jsx)(n.z,{startContent:(0,a.jsx)(R.LWo,{size:18,width:18,height:18}),variant:"faded",color:"danger",children:"N\xe3o pago"}):(0,a.jsx)(n.z,{startContent:(0,a.jsx)(B.n,{size:18,width:18,height:18}),variant:"faded",color:"success",children:"Pago"})});case"actions":return(0,a.jsxs)("div",{className:"relative flex items-center gap-12 ",children:[(0,a.jsx)(r.e,{color:"secondary",content:"Detalhes",children:(0,a.jsx)("span",{onClick:()=>eP(e),className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,a.jsx)(S.t,{})})}),(0,a.jsx)(r.e,{className:"bg-buttonAzulClaro text-white",content:"Fazer o Pagamento?",children:(0,a.jsx)("span",{onClick:()=>eM(e.id,e.mesCorrespondente),className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,a.jsx)(R.IDG,{className:"text-buttonAzulClaro"})})}),(0,a.jsx)(r.e,{className:"",color:"danger",content:"Deletar",children:(0,a.jsx)("span",{onClick:()=>console.log({show:!0,objeto:e.id}),className:"text-lg text-danger cursor-pointer active:opacity-50",children:(0,a.jsx)(D.p,{className:"text-red-500"})})})]});default:return s}},[en,eu]),eF=(0,b.useCallback)(()=>{eg<eV&&ef(eg+1)},[eg,eV]),eO=(0,b.useCallback)(()=>{eg>1&&ef(eg-1)},[eg]),eU=(0,b.useCallback)(e=>{ej(Number(e.target.value)),ef(1)},[]),e_=(0,b.useCallback)(e=>{e?(ep(e),ef(1)):ep("")},[]),eH=(0,b.useCallback)(()=>{ep(""),ef(1)},[]),eI=null!==(e=null==X?void 0:X.porcentagem)&&void 0!==e?e:0,eY=(0,b.useMemo)(()=>(0,a.jsxs)("div",{className:"flex flex-col gap-4  pb-4 p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-3 items-end py-4 w-full",children:[(0,a.jsx)(o.Y,{size:"md",fullWidth:!0,className:"w-full sm:max-w-[44%]  ",placeholder:"Pesquisar Contas...",startContent:(0,a.jsx)(M.W,{}),value:ex,onClear:()=>eH(),onValueChange:e_}),(0,a.jsx)("div",{className:"flex gap-3 w-full justify-end",children:(0,a.jsx)(l.A,{color:"primary",variant:"solid",endContent:(0,a.jsx)(z.p,{size:18,width:18,height:18}),children:(0,a.jsx)(v.default,{href:"/pages/contas/novaconta",children:"Nova Conta"})})})]}),(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)(i.W,{size:"sm",radius:"sm",classNames:{base:"max-w-md",track:"drop-shadow-md border border-default",indicator:"bg-gradient-to-r from-pink-500 to-yellow-500"},label:"Controle de or\xe7amento",value:parseInt(eI),showValueLabel:!0}),(0,a.jsx)(r.e,{color:"warning",content:"Soma entre despesas e contas",placement:"right-end",children:(0,a.jsx)("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",children:(0,a.jsx)(w.Hfo,{})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("span",{className:"text-default-400 text-small font-extrabold",children:["Total ",eu.length," Despesas cadastradas"]}),(0,a.jsxs)("span",{className:"text-default-400 text-small font-extrabold",children:["Total de ",(0,a.jsx)("span",{className:"text-red-500",children:(0,C.Z)(ez)})," Despesas no m\xeas selecionado"]})]}),(0,a.jsxs)("label",{className:"flex items-center text-default-400 text-small",children:["Linhas por p\xe1ginas",(0,a.jsxs)("select",{className:"bg-transparent outline-none text-default-400 text-small",onChange:eU,children:[(0,a.jsx)("option",{value:"5",children:"5"}),(0,a.jsx)("option",{value:"10",children:"10"}),(0,a.jsx)("option",{value:"15",children:"15"})]})]})]})]}),[ex,eU,eu.length,e_,eT,ec,G,X]),eq=(0,b.useMemo)(()=>(0,a.jsxs)("div",{className:"py-2 px-2 flex justify-between items-center",children:[(0,a.jsx)(c.g,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:eg,total:eV,onChange:ef}),(0,a.jsxs)("div",{className:"hidden sm:flex w-[30%] justify-end gap-2",children:[(0,a.jsx)(l.A,{isDisabled:1===eV,size:"sm",variant:"flat",onPress:eO,children:"Anterior"}),(0,a.jsx)(l.A,{isDisabled:1===eV,size:"sm",variant:"flat",onPress:eF,children:"Pr\xf3xima"}),(0,a.jsx)(E.Z,{tamanho:!1,size:"sm"})]})]}),[eg,eV,eT]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-[95%] m-auto",children:[(0,a.jsx)(T.Z,{title:"Minhas Contas"}),(0,a.jsxs)("div",{className:"w-full grid grid-cols-1 md:grid-cols-12 pt-6",children:[(0,a.jsx)("div",{className:"col-span-2 justify-center",children:(0,a.jsx)(d.d,{motionProps:{variants:{enter:{y:0,opacity:1,height:"auto",transition:{height:{type:"spring",stiffness:500,damping:30,duration:1},opacity:{easings:"ease",duration:1}}},exit:{y:-10,opacity:0,height:0,transition:{height:{easings:"ease",duration:.25},opacity:{easings:"ease",duration:.3}}}}},children:Object.keys(eW).map(e=>(0,a.jsx)(u.G,{classNames:{title:"text-primaryTableText font-bold text-center border-b-orange-100 bg-BgCardPadrao"},"aria-label":"Acorde\xe3o ".concat(e),title:e,children:(0,a.jsx)("div",{children:eW[e].map((e,t)=>(0,a.jsx)("div",{className:"text-center border-b-orange-100 cursor-pointer ".concat(t===el?"bg-primaryTableText":""),onClick:()=>{eZ(e.data),ei(t)},children:(()=>{let[t,s]=e.data.split("-").map(Number),a=new Date(t,s-1);return(0,L.WU)(a,"MMMM yyyy",{locale:Z.F}).toUpperCase()})()},e.data))})},e))})}),(0,a.jsx)("div",{className:"col-span-10 px-6  rounded-lg",children:(0,a.jsxs)(h.w,{className:"bg-BgCardPadrao",children:[eY,(0,a.jsxs)(x.b,{"aria-label":"Example table with custom cells",selectionMode:"none",classNames:{wrapper:"max-h-[382px]  bg-BgCardPadrao"},sortDescriptor:eb,onSortChange:eC,children:[(0,a.jsx)(p.J,{columns:N,children:e=>(0,a.jsx)(m.j,{className:"text-primaryTableText font-bold ",allowsSorting:e.sortable,align:"actions"===e.uid||"pago"===e.uid?"center":"start",children:e.name},e.uid)}),(0,a.jsx)(j.y,{emptyContent:"Sem Contas",items:eB,children:e=>(0,a.jsx)(g.g,{className:" ".concat(1===e.pago?"text-default-500 ":"hover:text-primaryTableText"),children:t=>(0,a.jsx)(f.X,{children:eR(e,t)})},e.id)})]},String(en)),eq]})})]})]}),(0,a.jsx)(y.Z,{open:es,onClose:()=>ea(!1),observacao:er}),(0,a.jsx)(O.Z,{isOpen:ev.show,onClose:()=>ek({show:!1,objeto:null}),message:H,confirmaEsclusao:eL,objeto:ev.objeto,messageTipo:Y})]})}},98743:function(e,t,s){"use strict";var a=s(57437),n=s(93641),r=s(16463);t.Z=e=>{let{className:t,tamanho:s,size:o}=e,l=(0,r.useRouter)();return(0,a.jsx)(n.A,{fullWidth:!!s&&s,size:o,onClick:()=>{l.back()},className:"bg-[#f97316] ",children:"Voltar"})}},62187:function(e,t){"use strict";t.Z=e=>e?e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"RS 0.00"},95404:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(57437);s(2265);var n=s(84603),r=s(2429),o=s(95256),l=s(81887),i=s(47971),c=s(93641),d=s(30050);function u(e){let{isOpen:t,onClose:s,objeto:u,confirmaEsclusao:h,message:x,messageTipo:p}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.R,{className:"bg-BgCardPadrao rounded-lg",backdrop:"opaque",isOpen:t,onClose:s,hideCloseButton:!0,children:(0,a.jsx)(r.A,{children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.k,{className:"flex flex-col w-full font-extrabold bg-[#C20E4D]",children:"Deseja fazer a exclus\xe3o"}),(0,a.jsx)(l.I,{}),(0,a.jsxs)(i.R,{className:"gap-6",children:[(0,a.jsx)(c.A,{variant:"bordered",color:"primary",onPress:s,children:"Cancelar"}),(0,a.jsx)(c.A,{variant:"ghost",color:"danger",onClick:h,className:"text-red-500",children:"Excluir"})]}),x?(0,a.jsx)(d.Z,{severity:p||"success",children:x}):null]})})})})}},59867:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var a=s(57437);s(2265);var n=s(84603),r=s(2429),o=s(95256),l=s(81887),i=s(89470),c=s(70186),d=s(47971),u=s(93641);function h(e){let{open:t,onClose:s,observacao:h}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.R,{backdrop:"opaque",isOpen:t,onClose:s,placement:"center",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},className:"bg-black rounded-lg p-4 text-white",children:(0,a.jsx)(r.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.k,{className:"text-center",children:"Observa\xe7\xe3o"}),(0,a.jsxs)(l.I,{className:"text-white bg-black",children:[(0,a.jsx)(i.Y,{label:"Comprador",defaultValue:h.responsavel,fullWidth:!0}),(0,a.jsx)(i.Y,{label:"Pagador",defaultValue:h.pagante,fullWidth:!0}),(0,a.jsx)(c.Y,{label:"Observa\xe7\xe3o",defaultValue:h.observacao,fullWidth:!0})]}),(0,a.jsx)(d.R,{children:(0,a.jsx)(u.A,{color:"danger",variant:"light",onPress:e,children:"Fechar"})})]})})})})}},80590:function(e,t,s){"use strict";function a(e){let[t,s,a]=e.split("/");return"".concat(a,"/").concat(s,"/").concat(t)}s.d(t,{Z:function(){return a}}),s(2265)},33109:function(e,t,s){"use strict";function a(e){let[t,s]=e.split("-");return"".concat(s,"/").concat(t)}s.d(t,{Z:function(){return a}}),s(2265)},30276:function(e,t,s){"use strict";var a=s(80665);async function n(e,t){return console.log("\uD83D\uDE80 ~ ControleMensal ~ data",e),(await a.h.post("/controleorcamento",{data:e,id:t})).data}t.Z=n},81313:function(e,t,s){"use strict";let a=(0,s(39099).Ue)(e=>({tokenUsuario:null,setTokenUsuario:t=>e({tokenUsuario:t})}));t.Z=a},11183:function(e,t,s){"use strict";let a=(0,s(39099).Ue)(e=>({visibility:!1,toggleVisibility:()=>e(e=>({visibility:!e.visibility}))}));t.Z=a},38602:function(e,t,s){"use strict";s.d(t,{n:function(){return n}});var a=s(57437);s(2265);let n=e=>{let{size:t,height:s,width:n,...r}=e;return(0,a.jsx)("svg",{width:t||n||24,height:t||s||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,a.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z",fill:"currentColor"})})}},84465:function(e,t,s){"use strict";s.d(t,{p:function(){return n}});var a=s(57437);s(2265);let n=e=>(0,a.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 20 20",width:"1em",...e,children:[(0,a.jsx)("path",{d:"M17.5 4.98332C14.725 4.70832 11.9333 4.56665 9.15 4.56665C7.5 4.56665 5.85 4.64998 4.2 4.81665L2.5 4.98332",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,a.jsx)("path",{d:"M7.08331 4.14169L7.26665 3.05002C7.39998 2.25835 7.49998 1.66669 8.90831 1.66669H11.0916C12.5 1.66669 12.6083 2.29169 12.7333 3.05835L12.9166 4.14169",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,a.jsx)("path",{d:"M15.7084 7.61664L15.1667 16.0083C15.075 17.3166 15 18.3333 12.675 18.3333H7.32502C5.00002 18.3333 4.92502 17.3166 4.83335 16.0083L4.29169 7.61664",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,a.jsx)("path",{d:"M8.60834 13.75H11.3833",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,a.jsx)("path",{d:"M7.91669 10.4167H12.0834",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})]})},32460:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(57437);s(2265);let n=e=>(0,a.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 20 20",width:"1em",...e,children:[(0,a.jsx)("path",{d:"M12.9833 10C12.9833 11.65 11.65 12.9833 10 12.9833C8.35 12.9833 7.01666 11.65 7.01666 10C7.01666 8.35 8.35 7.01666 10 7.01666C11.65 7.01666 12.9833 8.35 12.9833 10Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),(0,a.jsx)("path",{d:"M9.99999 16.8916C12.9417 16.8916 15.6833 15.1583 17.5917 12.1583C18.3417 10.9833 18.3417 9.00831 17.5917 7.83331C15.6833 4.83331 12.9417 3.09998 9.99999 3.09998C7.05833 3.09998 4.31666 4.83331 2.40833 7.83331C1.65833 9.00831 1.65833 10.9833 2.40833 12.1583C4.31666 15.1583 7.05833 16.8916 9.99999 16.8916Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5})]})},26583:function(e,t,s){"use strict";s.d(t,{p:function(){return n}});var a=s(57437);s(2265);let n=e=>{let{size:t=24,width:s,height:n,...r}=e;return(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:t||n,role:"presentation",viewBox:"0 0 24 24",width:t||s,...r,children:(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[(0,a.jsx)("path",{d:"M6 12h12"}),(0,a.jsx)("path",{d:"M12 18V6"})]})})}},79602:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});var a=s(57437);s(2265);let n=e=>(0,a.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,a.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})},5048:function(e,t,s){"use strict";var a=s(57437);s(2265),t.Z=e=>{let{title:t}=e;return(0,a.jsx)("h1",{className:"text-2xl font-bold text-center py-4 text-buttonAzulClaro",children:t})}},80665:function(e,t,s){"use strict";s.d(t,{h:function(){return a}});let a=s(38472).Z.create({baseURL:"https://app.fluxodocapital.com.br/api"})}},function(e){e.O(0,[6051,1779,4175,6310,7570,3641,5604,5988,4351,8230,3516,7822,6501,50,1298,1734,6773,6249,7138,5077,9556,4541,2971,7023,1744],function(){return e(e.s=46486)}),_N_E=e.O()}]);