(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9590],{84406:function(e,a,t){Promise.resolve().then(t.bind(t,98100))},98100:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return q}});var s=t(57437),o=t(2265),i=t(17821),n=t(30050),l=t(81227),r=t(57839),u=t(11001),d=t(30358),c=t(34909),m=t(80665),p=t(59928),h=t(2428),g=t(89470),x=t(70186),v=t(93641),j=t(84603),f=t(2429),b=t(95256),C=t(81887),k=t(47971);function N(e){let{isOpen:a,onClose:t,onSubmit:i,message:l,messageTipo:r}=e,[u,d]=(0,o.useState)("");return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(j.R,{className:"bg-BgCardPadrao rounded-lg ",backdrop:"opaque",isOpen:a,onClose:t,hideCloseButton:!0,children:(0,s.jsx)(f.A,{children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.k,{className:"flex flex-col w-full text-md font-extrabold ",children:"Deseja Adicionar um Novo Tipo de Despesa?"}),(0,s.jsx)(C.I,{children:(0,s.jsx)(g.Y,{variant:"bordered",onChange:e=>d(e.target.value),minLength:4,label:"Novo tipo de despesa"})}),(0,s.jsxs)(k.R,{className:"gap-6",children:[(0,s.jsx)(v.A,{variant:"light",color:"danger",onPress:e,children:"Cancelar"}),(0,s.jsx)(v.A,{onClick:()=>i(u),color:"success",children:"Salvar"})]}),l?(0,s.jsx)(n.Z,{severity:r,children:l}):null]})})})})}var D=t(14245);let Z={nomepatrimonio:"",tipodespesa:"",valorgasto:"",dataaquisicao:(0,d.Lg)((0,d.iT)()),compradorpagador:"",responsavel:"",litros:"",kmatual:"",kmantigo:""},S=D.Ry().shape({nomepatrimonio:D.Z_().required("Patrim\xf4nio \xe9 obrigat\xf3rio"),tipodespesa:D.Z_().required("Tipo \xe9 obrigat\xf3rio"),valorgasto:D.Z_().required("Valor \xe9 obrigat\xf3rio"),dataaquisicao:D.hT().required("Data \xe9 obrigat\xf3rio"),compradorpagador:D.Z_().optional(),responsavel:D.Z_().optional(),litros:D.Z_().optional(),kmatual:D.Z_().optional(),kmantigo:D.Z_().optional()});var y=t(81313),A=t(98743),T=t(87138),w=t(5048),_=t(16463);function q(){let[e,a]=(0,o.useState)(!1),[t,j]=(0,o.useState)([]),[f,b]=(0,o.useState)([]),[C,k]=(0,o.useState)(""),[D,q]=(0,o.useState)(""),[W,E]=(0,o.useState)(""),[P,R]=(0,o.useState)(""),[$,L]=(0,o.useState)(!1),[Y,V]=(0,o.useState)([]),{tokenUsuario:z}=(0,y.Z)(),I=(0,_.useRouter)(),B=async()=>{try{let e=await m.h.get("/buscabem",{params:{id:null==z?void 0:z.id}});j(e.data)}catch(e){console.error("\uD83D\uDE80 ~ buscaPatrimonios ~ error",e)}},F=async()=>{try{let e=await m.h.get("/buscatipodespesa",{params:{id:null==z?void 0:z.id}});b(e.data)}catch(e){console.error("\uD83D\uDE80 ~ buscaPatrimonios ~ error",e)}};(0,o.useEffect)(()=>{B(),F()},[]);let O=async e=>{200===(await m.h.post("/despesadeconsumo",{values:e,id:null==z?void 0:z.id})).status&&(k("Despesa Cadastrada com Sucesso"),L(!0),setTimeout(()=>{k(""),L(!1),I.push("/pages/patrimonio/listapatrimonio")},2e3))},U=async e=>{try{let t=await m.h.post("/novotipodespesa",{value:e,id:null==z?void 0:z.id});200===t.status&&(R("success"),E("Tipo de Despesa Cadastrado com Sucesso"),setTimeout(()=>{R(""),E(""),a(!1),F()},2e3))}catch(e){R("error"),E("Erro ao Cadastrar Tipo de Despesa"),setTimeout(()=>{R(""),E(""),a(!1)},2e3)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.J9,{initialValues:Z,validationSchema:S,onSubmit:O,children:e=>{let{values:o,errors:i,handleChange:m,handleSubmit:j,setFieldValue:b,touched:k}=e;return(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"w-[90%] mx-auto",children:[(0,s.jsx)(w.Z,{title:"Despesa de Bem"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(p.g,{name:"nomepatrimonio",value:o.nomepatrimonio,fullWidth:!0,isInvalid:k.nomepatrimonio&&!!i.nomepatrimonio,label:"Patrim\xf4nio",onChange:m,children:t.length>0?t.map(e=>(0,s.jsx)(h.W,{onClick:()=>V(e),value:e.id,children:e.nomePatrimonio},e.id)):(0,s.jsx)(h.W,{children:"Nenhum Patrim\xf4nio Cadastrado"})}),(0,s.jsx)(p.g,{value:o.tipodespesa,isInvalid:k.tipodespesa&&!!i.tipodespesa,label:"Tipo de Despesa",name:"tipodespesa",fullWidth:!0,onChange:m,children:f.map(e=>(0,s.jsx)(h.W,{onClick:()=>{o.kmatual="",o.kmantigo=""},value:e.nomeDespesa,children:e.nomeDespesa},e.id))}),"3"==Y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Y,{fullWidth:!0,name:"kmantigo",value:o.kmantigo&&(0,l.mE)(o.kmantigo),label:"km Antigo",onChange:m}),(0,s.jsx)(g.Y,{fullWidth:!0,name:"kmatual",label:"km Atual",value:o.kmatual&&(0,l.mE)(o.kmatual),onChange:m}),(0,s.jsx)(g.Y,{fullWidth:!0,name:"litros",label:"Litros",type:"number",value:o.litros,onChange:m})]}):null,(0,s.jsx)(g.Y,{fullWidth:!0,label:"Valor Gasto",isInvalid:k.valorgasto&&!!i.valorgasto,name:"valorgasto",value:o.valorgasto,startContent:(0,s.jsx)("div",{className:"pointer-events-none flex items-center",children:(0,s.jsx)("span",{className:"text-white text-small",children:"R$"})}),onBlur:m,onChange:e=>{let{name:a,value:t}=e.target;"valorgasto"===a?b(a,(0,l.e)(t)):b(a,t)}}),(0,s.jsx)(c.b,{locale:"pt-BR",children:(0,s.jsx)(u.J,{isInvalid:k.dataaquisicao&&!!i.dataaquisicao,name:"dataaquisicao",hideTimeZone:!0,defaultValue:(0,d.Lg)((0,d.iT)()),onChange:e=>b("dataaquisicao",e),maxValue:(0,d.Lg)((0,d.iT)()),label:"Data de Aquisi\xe7\xe3o"})}),(0,s.jsx)(g.Y,{fullWidth:!0,name:"responsavel",label:"Respons\xe1vel da Aquisi\xe7\xe3o",value:o.responsavel,onChange:m}),(0,s.jsx)(g.Y,{fullWidth:!0,name:"compradorpagador",label:"Pagador da Despesa",value:o.compradorpagador,onChange:m}),(0,s.jsx)(x.Y,{fullWidth:!0,label:"Observa\xe7\xe3o",name:"observacao",onChange:m})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 py-6",children:[(0,s.jsx)(r.Z,{onSubmit:j}),(0,s.jsx)(v.A,{className:"p-6 bg-buttonAzulClaro text-white ",onClick:()=>a(!0),color:"warning",children:"Novo tipo de despesa e/ou investimento"}),(0,s.jsx)(v.A,{className:"bg-buttonAzulEscuro text-white",size:"lg",children:(0,s.jsx)(T.default,{href:"/pages/patrimonio/novadespesapatrimonio",children:"Novo Patrim\xf4nio"})}),(0,s.jsx)(A.Z,{tamanho:!1})]})]}),C?(0,s.jsx)(n.Z,{onClose:()=>L(!1),severity:"success",variant:"filled",sx:{width:"100%"},children:C}):null]})}}),(0,s.jsx)(N,{isOpen:e,onClose:()=>a(!1),onSubmit:U,message:W,messageTipo:P})]})}},57839:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(57437),o=t(93641),i=t(37692),n=t(19993);function l(e){let{onSubmit:a,isSubmiting:t}=e;return(0,s.jsx)(o.A,{onClick:a,className:"p-6 text-sm",size:"sm",color:"success",endContent:t?(0,s.jsx)(n.Z,{className:" ml-3 w-[24px] h-[24px]","aria-label":"Loading...",color:"primary"}):(0,s.jsx)(i.Hh6,{}),children:"Salvar"})}},98743:function(e,a,t){"use strict";var s=t(57437),o=t(93641),i=t(16463);a.Z=e=>{let{className:a,tamanho:t,size:n}=e,l=(0,i.useRouter)();return(0,s.jsx)(o.A,{fullWidth:!!t&&t,size:n,onClick:()=>{l.back()},className:"bg-[#f97316] ",children:"Voltar"})}},81227:function(e,a,t){"use strict";function s(e){return e&&(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2")),e}function o(e){return e&&(e=(e=(e=(parseInt(e=e.replace(/\D/g,""))/100).toFixed(2)).replace(".",",")).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")),e}function i(e){return(e=e.replace(/\D/g,"")).split("").reverse().join("").match(/.{1,3}/g).join(".").split("").reverse().join("")}t.d(a,{VL:function(){return s},e:function(){return o},mE:function(){return i}})},81313:function(e,a,t){"use strict";let s=(0,t(39099).Ue)(e=>({tokenUsuario:null,setTokenUsuario:a=>e({tokenUsuario:a})}));a.Z=s},5048:function(e,a,t){"use strict";var s=t(57437);t(2265),a.Z=e=>{let{title:a}=e;return(0,s.jsx)("h1",{className:"text-2xl font-bold text-center py-4 text-buttonAzulClaro",children:a})}},80665:function(e,a,t){"use strict";t.d(a,{h:function(){return s}});let s=t(38472).Z.create({baseURL:"http://localhost:3333/api"})}},function(e){e.O(0,[3665,9095,4175,6310,7570,3641,5604,5988,4351,8230,3516,6501,7822,1298,50,7138,4608,6843,971,6647,5454,9928,2584,2971,7023,1744],function(){return e(e.s=84406)}),_N_E=e.O()}]);